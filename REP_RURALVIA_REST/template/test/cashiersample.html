<!DOCTYPE html>
<html>
<head>
      <meta charset="utf-8"/>
      <title>Cashier Sample</title>
            <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css"/>

      <!-- Compiled and minified JavaScript -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
       <script src="/api/js/manageRequestRviaRest.js"></script>
</head>
<body>
<div id="formulario">
       <div class="row">
    <div class="col s12">
      <div class="row">
        <div class="input-field col s6">
            <span>CÃ³digo Entidad</span>
          <input id="codigoEntidad" type="number" class="validate">
          
        </div>
        <div class="input-field col s6">
        <span>Longitud</span>
          <input id="longitud" type="number" class="validate">
         
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
        <span>Latitud</span>
          <input id="latitud" type="number" class="validate">
        </div>
      
      <div class="input-field col s6">
         <span>Radio</span>
         <input id="radio" type="number" class="validate">

        </div>
      </div>
    </div>
  </div>
  <a onclick="getData()" class="waves-effect waves-light btn light-green accent-3">Enviar</a>

</div>
<hr>
<div id="contenido">

</div>

<script type="text/javascript">

function getData() {
      var strCodigoEntidad = $("#codigoEntidad").val();
      var strLongitud = $("#longitud").val();
      var strLatitud =  $("#latitud").val();
      var strRadio = $("#radio").val();

      var strQueryParams = '?codigoEntidad=' + strCodigoEntidad + "&longitud=" + strLongitud + "&latitud=" + strLatitud + "&radio=" + strRadio;
      console.log("Codigo Entidad: " + strCodigoEntidad);
      var dataGet = {};
      dataGet.codigoEntidad = strCodigoEntidad;
      dataGet.longitud = strLongitud;
      dataGet.latitud = strLatitud;
      dataGet.radio = strRadio;
      $.ajax({
            url : '/api/rest/cashierLocatior/getjson' + strQueryParams,
            data : dataGet,
            type : 'GET',
            dataType : 'json',
            success : loadData,
            error : function(xhr, status) {
                  console.log("Error al procesar la llamada ajax. xhr" + xhr + " - status: " + status);
            }
      });
      console.log("Llamada ajax normal terminada.");
}

function loadData(json){
      var strList = addContent(pJson);
      $("#contenido").load(strList);
}
function addContent(json) {
      var strReturn = '';
      strReturn += '<ul class="collection">';
      var listCashier = json.response.ListaCajeros;
      for (cajero in listCashier ) {
            console.log(listCashier[cajero]);
            strReturn += '<li class="collection-item">';
            strReturn += '<span class="title">'+ listCashier[cajero].nombreEntidad +'</span>';
            strReturn += '<p>';
            strReturn += '<div class="chip">'+ listCashier[cajero].codigoEntidad +'</div><div class="chip">'+ listCashier[cajero].codigoCajeros +'</div>';
            strReturn += '<div class="chip">'+ listCashier[cajero].direccion +'</div><div class="chip">'+ listCashier[cajero].codigoPostal +'</div>';
            strReturn += '<div class="chip">'+ listCashier[cajero].indicadorCajero +'</div><div class="chip">'+ listCashier[cajero].indicadorComision +'</div>';
            strReturn += '<div class="chip">'+ listCashier[cajero].longitud +'</div><div class="chip">'+ listCashier[cajero].latitud +'</div>';
            strReturn += '<div class="chip">'+ listCashier[cajero].distancia +'</div><div class="chip">'+ listCashier[cajero].nombreLocalidad +'</div>';
            strReturn += '</p>';
            strReturn += '<span class="secondary-content">'+ listCashier[cajero].comision +'</span>';
            strReturn += '</li>';
      }
            strReturn += '</ul>';
            return strReturn;
      }

$(document).ready(function(){
      
      
      var pJson = '__JSONDATA__';

      var strList = addContent(pJson);
      $("#contenido").html(strList);
});

 
</script>
</body>
</html>